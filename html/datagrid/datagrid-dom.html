<div class="bjui-pageHeader" style="background-color:#fff; border-bottom:none;">
    <div class="bs-callout bs-callout-warning">
        <h4>Datagrid - Data API 示例说明</h4>
        <p>这是一个自动宽度的datagrid示例，通过 <code>table</code> 的Data属性 API调用。数据文件位置： <code>/json/datagrid/datagrid.json</code> 。<a href="html/datagrid/datagrid-dom-source.html" data-toggle="dialog" data-options="{id:'dialog-datagrid-source-data', width:1000, height:600, title:'查看Datagrid示例- Data API - 源码'}">点击查看示例源码</a></p>
    </div>
</div>
<div class="bjui-pageContent">
    <table class="table table-bordered" data-toggle="datagrid" data-options="{
        height: '100%',
        gridTitle : 'datagrid 完整示例 - Data属性 API',
        showToolbar: true,
        toolbarItem: 'edit,add,|,cancel',         //['all, add, edit, cancel, save, del, import, export, exportf, |']
        local: 'local',
        dataUrl: '../../json/datagrid/datagrid.json',
        editUrl: 'json/ajaxDone.json',
        paging: {pageSize:50, pageCurrent:1},
        linenumberAll: true,
        sortAll: false,
        dropOptions:{
            drop:true,                  // 拖动开关
            dropUrl: null,         // 拖动结束后，发送数据到该url
            paging:true,           // 是否发送分页参数
            scope:'drop',          // 发送拖动数据范围，'drop' = '被拖动影响的数据'，'all' = '当前页全部数据'
            beforeDrag: null,      // function($tr, data)，拖动前方法，返回false则不拖动
            beforeDrop: null,      // function(sourceData, descData, position)，拖动到目标并放置之前方法，返回false则不放置，参数分别是：(源数据、目标数据、放置位置(append、before、after))
            afterDrop: 'POST'      // string 或 function($descTr, $sourceTr)，如果是字符串并有dropUrl参数，则发送拖动数据到dropUrl，否则执行自定义方法
        }
    }">
        <thead>
            <tr>
                <th rowspan="2" data-options="{name:'code',align:'center',width:70}">门诊号</th>
                <th colspan="5" align="center">挂号信息</th>
                <th colspan="3" align="center">病人信息</th>
                <th colspan="3" align="center">就诊信息</th>
                <th rowspan="2" data-options="{name:'opercode',align:'center'}">操作员编号</th>
                <th rowspan="2" data-options="{name:'operdate',align:'center',type:'date',pattern:'yyyy-MM-dd HH:mm:ss'}">操作时间</th>
            </tr>
            <tr>
                <th data-options="{name:'regdate',align:'center',type:'date',pattern:'yyyy-MM-dd HH:mm',render:function(value){return value?value.substr(0,16):value}}">挂号日期</th>
                <th data-options="{name:'order',align:'center',width:50}">当日序号</th>
                <th data-options="{name:'regname'}">挂号类别</th>
                <th data-options="{name:'deptname'}">科室名称</th>
                <th data-options="{name:'regfee',align:'center',width:60}">挂号费</th>
                <th data-options="{name:'name',align:'center',width:70}">姓名</th>
                <th data-options="{name:'sex',align:'center',width:45,render:function(value){return String(value)=='true'?'男':'女'}}">性别</th>
                <th data-options="{name:'age',align:'center',type:'number',width:45,render:function(value){return 2015-parseInt(value)}}">年龄</th>
                <th data-options="{name:'fr',align:'center',width:70}">是否初诊</th>
                <th data-options="{name:'see',align:'center',width:55}">已就诊</th>
                <th data-options="{name:'seedate',align:'center',type:'date',pattern:'yyyy-MM-dd HH:mm:ss'}">就诊时间</th>
            </tr>
        </thead>
    </table>
</div>